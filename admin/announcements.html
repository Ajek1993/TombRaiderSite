<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel Admina - Zapowiedzi Stream贸w</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/admin.css">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
</head>
<body class="admin-body">

  <!-- Login Screen (shown if not authenticated) -->
  <div class="login-screen" id="loginScreen">
    <div class="login-card">
      <div class="login-header">
        <span class="logo-icon"></span>
        <h1>Panel Admina</h1>
        <p>Zarzdzanie zapowiedziami stream贸w</p>
      </div>
      <form id="loginForm" class="login-form">
        <div class="form-group">
          <label for="password">Haso</label>
          <input
            type="password"
            id="password"
            name="password"
            placeholder="Wprowad藕 haso admina"
            required
            autocomplete="current-password"
          >
        </div>
        <button type="submit" class="btn btn-primary btn-full">
          Zaloguj si
        </button>
        <p class="login-error" id="loginError"></p>
      </form>
    </div>
  </div>

  <!-- Admin Panel (shown after authentication) -->
  <div class="admin-panel" id="adminPanel" style="display: none;">

    <!-- Header -->
    <header class="admin-header">
      <div class="admin-header-content">
        <div class="admin-logo">
          <span class="logo-icon"></span>
          <div>
            <h1>Panel Admina</h1>
            <p>Zarzdzanie zapowiedziami</p>
          </div>
        </div>
        <div class="admin-actions">
          <a href="/" class="btn btn-secondary" target="_blank">
            Podgld strony
          </a>
          <button id="logoutBtn" class="btn btn-danger">
            Wyloguj
          </button>
        </div>
      </div>
    </header>

    <div class="admin-container">

      <!-- Form Section -->
      <section class="admin-section">
        <div class="section-header">
          <h2 id="formTitle">Dodaj Now Zapowied藕</h2>
          <button id="cancelEditBtn" class="btn btn-secondary" style="display: none;">
            Anuluj edycj
          </button>
        </div>

        <form id="announcementForm" class="announcement-form">
          <input type="hidden" id="announcementId" name="id">

          <div class="form-row">
            <div class="form-group">
              <label for="title">
                Tytu Streamu <span class="required">*</span>
              </label>
              <input
                type="text"
                id="title"
                name="title"
                placeholder="np. Rise of Tomb Raider - Episode 23"
                required
              >
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="description">
                Opis Streamu
              </label>
              <textarea
                id="description"
                name="description"
                rows="4"
                placeholder="Kr贸tki opis tego co bdzie si dziao na streamie..."
              ></textarea>
            </div>
          </div>

          <div class="form-row form-row-2">
            <div class="form-group">
              <label for="date">
                Data Streamu <span class="required">*</span>
              </label>
              <input
                type="date"
                id="date"
                name="date"
                required
              >
            </div>

            <div class="form-group">
              <label for="time">
                Godzina Streamu <span class="required">*</span>
              </label>
              <input
                type="time"
                id="time"
                name="time"
                required
              >
            </div>
          </div>

          <div class="form-row form-row-2">
            <div class="form-group">
              <label for="platform">
                Platforma
              </label>
              <select id="platform" name="platform">
                <option value="TikTok">TikTok</option>
                <option value="YouTube">YouTube</option>
                <option value="Twitch">Twitch</option>
              </select>
            </div>

            <div class="form-group">
              <label for="platformLink">
                Link do Streamu
              </label>
              <input
                type="url"
                id="platformLink"
                name="platformLink"
                placeholder="https://..."
              >
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="features">
                Funkcje/Atrakcje Streamu
                <span class="label-hint">(ka偶da w nowej linii)</span>
              </label>
              <textarea
                id="features"
                name="features"
                rows="5"
                placeholder="Kontynuacja g贸wnej fabuy&#10;Eksploracja opcjonalnych grobowc贸w&#10;Q&A z widzami&#10;Giveaway dla spoecznoci!"
              ></textarea>
            </div>
          </div>

          <div class="form-row form-row-2">
            <div class="form-group">
              <label for="status">
                Status
              </label>
              <select id="status" name="status">
                <option value="scheduled">Zaplanowany</option>
                <option value="live">Na 呕ywo</option>
                <option value="completed">Zakoczony</option>
              </select>
            </div>

            <div class="form-group">
              <label for="thumbnail">
                URL Miniatury (opcjonalnie)
              </label>
              <input
                type="url"
                id="thumbnail"
                name="thumbnail"
                placeholder="https://..."
              >
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary" id="submitBtn">
              Dodaj Zapowied藕
            </button>
            <button type="reset" class="btn btn-secondary">
              Wyczy formularz
            </button>
          </div>
        </form>

        <div class="form-message" id="formMessage"></div>
      </section>

      <!-- List Section -->
      <section class="admin-section">
        <div class="section-header">
          <h2>Wszystkie Zapowiedzi</h2>
          <button id="refreshBtn" class="btn btn-secondary">
             Odwie偶
          </button>
        </div>

        <div class="announcements-table-wrapper">
          <div id="loadingSpinner" class="loading-spinner">
            adowanie zapowiedzi...
          </div>

          <table class="announcements-table" id="announcementsTable" style="display: none;">
            <thead>
              <tr>
                <th>Tytu</th>
                <th>Data & Czas</th>
                <th>Platforma</th>
                <th>Status</th>
                <th>Akcje</th>
              </tr>
            </thead>
            <tbody id="announcementsTableBody">
              <!-- Rows will be populated by JavaScript -->
            </tbody>
          </table>

          <div id="emptyState" class="empty-state" style="display: none;">
            <p>Brak zapowiedzi. Dodaj pierwsz zapowied藕 u偶ywajc formularza powy偶ej.</p>
          </div>
        </div>
      </section>

    </div>
  </div>

  <!-- JavaScript -->
  <script src="/assets/js/admin-announcements.js"></script>
</body>
</html>
